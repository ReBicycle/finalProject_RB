<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- MyBatis에서 namespace는 필수적으로 명시해야 함 -->
 <mapper namespace="board">   
 	<insert id="write" parameterType="reportVO">
 		<selectKey keyProperty="reportNo" resultType="int" order="BEFORE">
 			select
 			report_seq.nextval from dual
 		</selectKey>
 		insert into rb_report(reportNo,reporterId,blackId,contents,reportDate)
 		values(#{reportNo},#{reporterId},#{blackId},#{contents},sysdate)
 	</insert>
 	<resultMap type="reportVO" id="reportRM">
		<result property="reportDate" column="reportDate" />
	</resultMap>
 	<select id="getReportList" resultMap="reportRM" parameterType="pagingBean">
		SELECT r.reportNo,r.reportDate,r.reporterId,r.blackId,r.contents FROM(
		SELECT row_number() over(order by reportNo desc) as rnum,reportNo,reporterId,blackId,contents,
		to_char(reportDate,'YYYY.MM.DD') as reportDate
		FROM rb_report
		) r, rb_report order by reportNo desc
		<!--  rnum between #{startRowNumber} and #{endRowNumber}
		order by no desc -->
	</select>
	<select id="getTotalContentCount" resultType="int">
		select count(*) from
		rb_report
	</select>
 </mapper>
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
















